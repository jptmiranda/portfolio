---
import { AstroFont } from "astro-font";
import { ViewTransitions } from "astro:transitions";
import "../styles/main.css";
import BaseHead from "../components/BaseHead.astro";
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead />
    <AstroFont
      config={[
        {
          name: "Josefin Sans",
          src: [],
          googleFontsURL:
            "https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;500;700&display=swap",
          preload: true,
          display: "swap",
          fallback: "sans-serif",
        },
        {
          name: "Audiowide",
          src: [],
          googleFontsURL:
            "https://fonts.googleapis.com/css2?family=Audiowide&display=swap",
          preload: true,
          display: "swap",
          fallback: "sans-serif",
        },
      ]}
    />
    <ViewTransitions />
    <script async>
      localStorage.theme === "dark" ||
      (!("theme" in localStorage) &&
        window.matchMedia("(prefers-color-scheme: dark)").matches)
        ? document.documentElement.classList.add("dark")
        : document.documentElement.classList.remove("dark");

      document.addEventListener("astro:after-swap", () => {
        localStorage.theme === "dark" ||
        (!("theme" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
          ? document.documentElement.classList.add("dark")
          : document.documentElement.classList.remove("dark");
      });
    </script>
    <style>
      body {
        color: theme(colors.foreground);
        background-color: theme(colors.background);
      }
    </style>
  </head>

  <slot />
</html>
